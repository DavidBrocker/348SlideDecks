---
title: "Independent Samples T-Test"
subtitle: "Lecture 10"
author: "Dave Brocker"
footer: "⬡⬢⬡⬢⬡⬢⬡⬢⬡⬢⬡⬢⬡"
institute: "Farmingdale State College"
format: 
  revealjs:
    theme: custom.scss
    incremental: true   
    touch: true
    chalkboard: true
    width: 1600
    height: 900
    lightbox: true
    code-fold: true
    drop:
      engine: webr
      webr:
        packages:
         - ggplot2
         - dplyr
revealjs-plugins:
  - drop
---

## From Paired to Independent Samples

Last time, we compared **two related means** — the *same participants* measured twice (e.g., before vs. after caffeine).

Now, we’ll compare **two unrelated means** — *different participants* in each group.

| Paired t-test                          | Independent t-test             |
|----------------------------------------|--------------------------------|
| Same people                            | Different people               |
| Within-subjects                        | Between-subjects               |
| Reduces error (individual differences) | Must estimate error separately |

## From Paired to Independent Samples

### Visual Comparison

```{r}
#| echo: false
#| fig-align: center


library(ggplot2)
library(gt)

paired <- data.frame(
  condition = rep(c("Pre","Post"), each = 10),
  score = c(rnorm(10, 70, 5), rnorm(10, 75, 5)),
  id = rep(1:10, 2)
)

independent <- data.frame(
  group = rep(c("Control","Experimental"), each = 10),
  score = c(rnorm(10, 70, 5), rnorm(10, 75, 5))
)

library(patchwork)

p1 <- ggplot(paired, aes(x = condition, y = score, group = id)) +
  geom_line(alpha = 0.5) +
  geom_point(size = 2) +
  theme_minimal() +
  labs(title = "Paired Samples: Same People", y = "Score", x = "") +
  scale_y_continuous(breaks = seq(60,80,5))

p2 <- ggplot(independent, aes(x = group, y = score, fill = group)) +
  geom_boxplot(alpha = 0.6) +
  theme_minimal() +
  labs(title = "Independent Samples: Different People", y = "Score", x = "")

p1 + p2
```

## Sampling Theory (Recap)

-   Sampling theory allows us to test two unrelated group

-   We can compare the group means

```{r}
library(ggplot2)
library(dplyr,warn.conflicts = FALSE)
library(tidyr)

# Generate data for two normal distributions
x <- seq(-6, 6, length=100)
null_dist <- dnorm(x, mean = 0, sd = 1)
alt_dist <- dnorm(x, mean = 2, sd = 1)

data <- data.frame(
  x = rep(x, 2),
  y = c(null_dist, alt_dist),
  hypothesis = factor(rep(c("Null Hypothesis", "Alternative Hypothesis"), each=length(x)))
)

# Create the plot

plt <- 
  ggplot(data, aes(x = x, y = y, 
                 lty = rev(hypothesis))) +
    geom_line(aes(color = "purple")) +
  theme_linedraw() + 
  labs(
    x = "",
    y = "",
    lty = "Hypotheses"
  ) + 
  theme(
    panel.grid = element_blank(),
    legend.position = "inside",
    legend.position.inside = c(.2,.5),
    legend.background = element_rect(color = "black")
  ) + 
  scale_color_identity()

plt 

```

## Sampling Theory (Recap)

-   Sampling theory allows us to test two unrelated group

-   We can compare the group means

```{r}
#| echo: false

plt + 
  geom_vline(xintercept = -.8,color = "darkblue") + 
  scale_x_continuous(breaks = c(-6,-4,-2,0,2,4,6))
```

## Sampling Theory (Recap)

-   Sampling theory allows us to test two unrelated group

-   We can compare the group means

```{r}
#| echo: false

plt + 
  geom_vline(xintercept = 1.6,color = "darkblue") + 
  scale_x_continuous(breaks = c(-6,-4,-2,0,2,4,6))

```

## Sampling Theory (Recap)

-   Sampling theory allows us to test two unrelated group

-   We can compare the group means

```{r}
#| echo: false

plt + 
  geom_vline(
    xintercept = 1.6,
    color = "darkblue"
    ) + 
  geom_vline(
    xintercept = 1, 
    color = "red"
    ) + 
  geom_text(
    x = 1, 
    y = .05, 
    label = "Critical Value",
    color = "red",
    angle = 90,
    size = 3,
    vjust = -.4
    ) +
  scale_x_continuous(
    breaks = c(-6,-4,-2,0,2,4,6)
    )

```

## Sampling Theory (Recap)

-   Sampling theory allows us to test two unrelated group

-   We can compare the group means

```{r}
#| echo: false

plt + 
  geom_vline(
    xintercept = 1.6,
    color = "darkblue"
    ) + 
  geom_vline(
    xintercept = 1, 
    color = "red"
    ) + 
  geom_text(
    x = 1, 
    y = .05, 
    label = "Critical Value",
    color = "red",
    angle = 90,
    size = 3,
    vjust = -.4
    ) +
  scale_x_continuous(
    breaks = c(-6,-4,-2,0,2,4,6)
    )
```

## Inferential Statistics

### **Applied to Independent Groups**

-   Our goal is still to test whether a difference is likely due to chance

-   With independnet samples, chance variation now includes **differences between individuals** in *both* groups.

## Group Variance

### Within and Between

::::: columns
::: {.column width="50%"}
To compare the means we need to know:

-   Between group variance: how much the answers from the **experimental** group differ from the **control** group.

-   Within group variance: how much the **answers of all participants** differ from one another.
:::

::: {.column width="50%"}
```{r}
df <- tibble(
  treatment = rep(c("Experimental", "Control"), each = 30),
  score = c(rnorm(30, 30, 2), rnorm(30, 40, 5))
)

means <- df %>%
  group_by(treatment) %>%
  summarise(mean_score = mean(score))

df %>%
  ggplot(aes(treatment, score, fill = treatment)) +
  geom_violin(alpha = 0.3, width = 0.8, color = NA) +
  geom_jitter(width = 0.1, alpha = 0.5, size = 2) +
  stat_summary(fun = mean, geom = "point", size = 4, color = "black") +
  stat_summary(fun.data = mean_sdl, fun.args = list(mult = 1), geom = "errorbar", width = 0.2, color = "black") + 
  theme_minimal()
```
:::
:::::

## Independent Samples t-test Overview

Used when we compare **two different groups** on a continuous outcome.

-   **Examples:**

    -   Coffee drinkers vs. decaf drinkers on happiness

    -   Students with music vs. silence during study

    -   Phone use vs. no phone use before bed

-   **Goal:**

    -   Is the mean difference between groups larger than what we’d expect by chance?

## Independent Samples t-test

### Example

> The experimental group drinks caffeinated coffee. The control group drinks decaf. I ask both groups to complete a survey to measure their happiness on a scale of `1` to `10`.

-   The experimental group has a mean happiness score of `8`

-   The control group mean happiness score of `6`

::: fragment
Is the group that drank coffee significantly happier than the control group?
:::

## Independent samples t-test

```{r}
#| echo: false

plt + 
  geom_vline(
    xintercept = 2,
    color = "darkblue"
    ) + 
  geom_vline(
    xintercept = 0, 
    color = "red"
    ) + 
  theme(
    axis.text.x = element_blank()
  ) + 
  geom_text(
    x = -4,
    y = .1,
    label = "M_Control = 6"
  ) +
    geom_text(
    x = -4.3,
    y = .05,
    label = "M_Exp = 8"
  )
```

## Independent samples t-test

To compare the means we need to know:

-   **Between group variance**: how much the answers from the experimental group differ from the control group.

-   **Within group variance**: how much the answers of all participants differ from one another.

## Formulas

Inferential statistics have both **theoretical** and **computational** formulas:

-   Theoretical

    -   Formula for if we actually knew the population parameters

-   Computational

    -   Formula for estimating the test statistics based solely on sample data

## Theoretical Formula:

$$\color{blue}{t} = \frac{\color{red}{\bar{x}} -\color{orange}{\mu}}{\sqrt{\color{grey}{s^{2}_{pooled}}}}$$

-   [t]{style="color:blue"} = T Statistic

-   [Sample Mean]{style="color:red"}

-   [Population Mean]{style="color:orange"}

-   [Pooled Variance]{style="color:grey"}

## Independent samples t-test

Theoretical Formula:

$$t = \frac{\bar{x} - \color{green}{μ}}{\sqrt{s^{2}_{pooled}}}$$

## Independent samples t-test

### Theoretical Formula:

$$t = \frac{\bar{x} - μ}{\sqrt{\color{orange}{s^{2}_{pooled}}}}$$

## Independent samples t-test

### Theoretical Formula:

$$t = \frac{\bar{x} - μ}{\sqrt{s^{2}_{pooled}}}$$

## Independent samples t-test

### Theoretical Formula:

$$t = \frac{\bar{x} - μ}{\sqrt{s^{2}_{pooled}}}$$

## Independent samples t-test

### Computational Formula:

$$\frac{M_{Experimental}-M_{Control}}{\sqrt{\color{darkblue}{\frac{s1}{n1}+ \frac{s2}{n2}}}}$$

-   [Pooled Variance]{style="color: darkblue"}

## Independent samples t-test

### Computational Formula:

$$\frac{M_{Experimental}-M_{Control}}{\sqrt{\frac{s1}{n1}+ \frac{s2}{n2}}}$$

## Data Overview

```{r}
dat <- 
  tibble(
  grp = rep(c("Experimental","Control"),
            each = 10),
  happy = c(rnorm(10,8,1),rnorm(10,6,1)) |> round(0)
  ) 

t.test(dat$happy ~ dat$grp, var.equal = TRUE) |> 
  broom::tidy() |> 
  rename(
    mdiff = estimate,
    t = statistic,
    Experimental = estimate2,
    Conrol = estimate1,
    p = p.value,
    df = parameter) |> 
  mutate(
    `CI[ll,uu]` = paste0("[",conf.low |> round(2),", ",conf.high |> round(2),"]"),
    p = ifelse(p <.01, "<.001",p)) |> 
  select(-conf.low, -conf.high,-method) |> 
  relocate(alternative,.after = last_col()) |> 
  gt() |> 
  fmt_auto() |> 
  opt_row_striping() |> 
  tab_options(
    table.font.size = 32,
    table.width = pct(70)
  ) |> 
  tab_style(
    style = cell_text(weight = "bold"),
    locations = cells_column_labels()
  )
```

## Independent samples t-test:

### Assumptions of Independent Samples t-test

1.  **DV is continuous**\
2.  **Observations are independent**\
3.  **Normality:** each group’s distribution is approximately normal\
4.  **Homogeneity of variance:** variances are similar across groups

## Independent samples t-test:

### Assumptions of Independent Samples t-test

-   **Random sampling**:

    -   The data is randomly sampled from a population 

-   **Independence**:

    -   Each group must be made up of independent observations.

-   **Homogeneity of variance**:

    -   Variance should be equal across groups (tested with Levene's Test)

## Interpreting Levene’s Test

-   Levene’s Test tells us whether the assumption of equal variances holds.

    -   If p \> .05 → use the **top row**\*\* ("Equal variances assumed")

    -   If p \< .05 → use the **bottom row** ("Equal variances not assumed")

-   Normality

    -   Each group's distribution should be approximately normal

## Independent samples t-test

### Homogeneity of Variance

### ![](images/spiderman.png){style="border-radius: 20px;"}

::: fragment
If the **Levene's Test** is significant, use the t value from the second row and its corresponding significance.
:::

-   t is the test statistic.

-   Sig (2-tailed) is the p-value.

## Why Do We Care?

We need the **Levene's Test**, because if the variance from the experimental group is not equal to the variance of the control group, we have to use a different formula for the pooled standard deviation.

-   A significant Levene's Test means a significant difference in the variances.

## Independent samples t-test: SPSS

### Interpreting Results

If the **Levene's Test** is significant, use the t value from the second row and its corresponding significance

## Let’s Apply It: Three Independent Designs

We’ll test three common between-subjects designs:

1\. **Chocolate and Concentration** – Experimental vs. Control\
2. **Music and Studying** – Environmental manipulation\
3. **Phone Use and Sleep** – Behavioral difference

## Does chocolate improve concentration?

**Design Summary**

> 50 undergraduate students from XYZ University were randomly assigned to one of two groups. One group received a small piece of chocolate (70% dark cocoa) to consume before completing a 10-minute concentration task. The other group received no chocolate. The task measured sustained attention and was scored on a 0–20 scale.

-   **IV**: Chocolate (Yes vs. No)\
-   **DV**: Concentration task score\
-   **Design**: Between-subjects, randomized

## Does chocolate improve concentration? 

::::: columns
::: {.column width="50%"}
> 50 undergraduate students from XYZ University were randomly assigned to one of two groups. One group received a small piece of chocolate (70% dark cocoa) to consume before completing a 10-minute concentration task. The other group received no chocolate. The task measured sustained attention and was scored on a 0–20 scale.
:::

::: {.column width="50%"}
```{r}
#| echo: true
library(ggplot2)
library(gtsummary)
library(dplyr)
library(gt)
library(broom)

set.seed(42)
choco <- data.frame(
  concentration = c(rnorm(25, 15, 2), rnorm(25, 13.5, 2)),
  group = rep(c("chocolate", "no_chocolate"), each = 25)
)


# Plot
ggplot(choco, aes(x = group, y = concentration, fill = group)) +
  geom_boxplot(alpha = .5) +
  geom_jitter(alpha = .4) +
  theme_minimal() +
  labs(title = "Chocolate and Concentration",
       y = "Concentration Score", x = "")

# Summary Table
t.test(concentration ~ group, 
       data = choco,
       var.equal = TRUE) %>%
  tidy() %>%
  select(-method) |> 
  rename(
    Difference = estimate,
    t = statistic,
    p = p.value,
    df = parameter,
    `95% CI Low` = conf.low,
    `95% CI High` = conf.high
  ) |> 
  mutate(p = ifelse(p<.05,"<.05",p)) |> 
  gt() |> 
  fmt_auto()
```
:::
:::::

## Example 2: Music and Study Efficiency

## Does instrumental music improve studying?

> **Design Summary**\
> 40 students participated in a study examining how background music affects studying. Participants were randomly assigned to study a short academic text under one of two conditions: instrumental music or silence. After 15 minutes of study time, they completed a 10-item multiple-choice quiz.

-   **IV**: Study condition (Instrumental music vs. Silence)\
-   **DV**: Quiz performance (number of correct answers)\
-   **Design**: Between-subjects, randomized

## Example 2: Music and Study Efficiency

### Does instrumental music improve studying?

::::: columns
::: {.column width="50%"}
> **Design Summary**\
> 40 students participated in a study examining how background music affects studying. Participants were randomly assigned to study a short academic text under one of two conditions: instrumental music or silence. After 15 minutes of study time, they completed a 10-item multiple-choice quiz.
:::

::: {.column width="50%"}
```{r}
#| echo: true
set.seed(99)
music <- 
  data.frame(
    quiz_score = c(rnorm(20, 18, 1), 
                   rnorm(20, 16.5, 1.2)),
    group = rep(c("music", "silence"), each = 20)
)

# Plot
ggplot(music, 
       aes(x = group, 
           y = quiz_score, 
           fill = group)
       ) +
  geom_violin(trim = FALSE,alpha = .4) +
  geom_jitter(
    width = 0.1, 
    alpha = 0.4
    ) +
  stat_summary(
    fun.data = "mean_se",
    geom = "errorbar",
    width = .2
  ) +
  theme_minimal() +
  labs(
    title = "Music and Study Performance",
    y = "Quiz Score", 
    x = "")

# Summary Table
  t.test(quiz_score ~ group, 
         data = music,
         ,var.equal = TRUE) %>%
  tidy() |> 
  select(-method) |> 
  rename(
    Estimate = estimate,
    t  = statistic,
    p = p.value,
    df = parameter,
    `95% CI Low` = conf.low,
    `95% CI High` = conf.high
  ) |> 
  mutate(p = ifelse(p<.05,"<.05",p)) |> 
  gt() |> 
  fmt_auto()
```
:::
:::::

## Example 3: Phone Use and Sleep

### Does bedtime phone use affect sleep?

> **Design Summary**\
> 80 students from XYZ University took part in a study on sleep and cell phone use. Participants were randomly assigned to one of two conditions. One group was instructed to avoid phone use for 30 minutes before bed, while the other used their phones as normal. The next morning, all students rated their sleep quality on a 1–10 scale.

-   **IV**: Phone use before bed (Yes vs. No)\
-   **DV**: Sleep quality rating (1 = poor, 10 = excellent)\
-   **Design**: Between-subjects, randomized

## Example 3: Phone Use and Sleep

### Does bedtime phone use affect sleep?

::::: columns
::: {.column width="50%"}
> **Design Summary**\
> 80 students from XYZ University took part in a study on sleep and cell phone use. Participants were randomly assigned to one of two conditions. One group was instructed to avoid phone use for 30 minutes before bed, while the other used their phones as normal. The next morning, all students rated their sleep quality on a 1–10 scale.
:::

::: {.column width="50%"}
```{r}

#| echo: true
set.seed(77)

sleep <- 
  data.frame(
    sleep_quality = 
      c(rnorm(40, 6.8, 1), rnorm(40, 7.4, 0.9)),
    group = rep(c("phone", "no_phone"), each = 40)
    )

# Plot
ggplot(sleep, 
       aes(x = group,
           y = sleep_quality, 
           fill = group)) +
  stat_summary(
    fun = "mean",
    geom = "col",
    width = .5,
    alpha = .8
    ) +
  geom_jitter(alpha = .4) +
  geom_errorbar(
    stat = "summary", 
    fun.data = mean_se, 
    width = 0.2) +
  theme_minimal() +
  labs(
    title = "Phone Use and Sleep Quality",
    y = "Sleep Quality (1–10)", 
    x = "")

# Summary Table
t.test(sleep_quality ~ group, 
       data = sleep,
       var.equal = TRUE) %>%
  tidy() |> 
  select(-method) |> 
  rename(
    Estimate = estimate,
    t = statistic,
    p = p.value,
    df = parameter,
    `95% CI Low` = conf.low,
    `95% CI High` = conf.high
  ) |> 
  gt() |> 
  fmt_auto()
```
:::
:::::

## Summary: Independent Samples t-test

-   Compares **two independent groups**
-   Tests whether the difference in means is significant
-   Uses **pooled variance** as the denominator
-   Check assumptions: independence, normality, equal variance
-   Commonly used in **experimental** designs
